{"ast":null,"code":"var _jsxFileName = \"C:\\\\Leo\\\\Work\\\\FSD\\\\CaseStudy\\\\mentor-on-demand-ui\\\\src\\\\components\\\\SearchTrainings\\\\SearchTrainings.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport 'react-tabs/style/react-tabs.css';\nimport './searchTrainings.css';\nimport Select from 'react-select';\nimport DateRangePicker from 'react-daterange-picker';\nimport \"react-daterange-picker/dist/css/react-calendar.css\";\nimport originalMoment from \"moment\";\nimport { extendMoment } from \"moment-range\";\nimport { Link } from \"react-router-dom\";\n\nclass SearchTrainings extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSelect = name => value => {\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.onDateSelect = (daterange, states) => {\n      this.setState({\n        daterange,\n        states\n      });\n    };\n\n    this.handleSelect = this.handleSelect.bind(this);\n    this.onDateSelect = this.onDateSelect.bind(this);\n    this.performSearch = this.performSearch.bind(this);\n    this.getResultTableBody = this.getResultTableBody.bind(this);\n    const moment = extendMoment(originalMoment);\n    const today = moment();\n    this.state = {\n      technologyOptions: [],\n      technology: null,\n      mentorInfos: [],\n      daterange: moment.range(today.clone().subtract(0, \"days\"), today.clone())\n    };\n    this.fetchTechnologies();\n  }\n\n  fetchTechnologies() {\n    const url = 'http://localhost:8080/mod/technology/all';\n    const {\n      technologyOptions\n    } = this.state;\n    fetch(url).then(res => res.json()).then(result => {\n      result.map(function (item) {\n        var option = {\n          label: item.name,\n          value: item.id\n        };\n        technologyOptions.push(option);\n      });\n    });\n  }\n\n  fetchTrainings(query) {\n    const url = 'http://localhost:8080/mod/trainsearch/mentor';\n    const {\n      mentorInfos\n    } = this.state;\n    fetch(url, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(query)\n    }).then(res => res.json()).then(result => {\n      result.map(function (item) {\n        mentorInfos.push(item);\n      });\n      this.setState({\n        mentorInfos: mentorInfos\n      });\n    });\n  }\n\n  performSearch() {\n    const {\n      technology,\n      daterange\n    } = this.state;\n\n    if (!this.isInputValid()) {\n      //alert(\"Technology field is empty. Please select Technology from dropdown..\");\n      return;\n    }\n\n    var query = {\n      technology: technology.value,\n      startdate: daterange.start,\n      enddate: daterange.end\n    };\n    this.state.mentorInfos = [];\n    this.fetchTrainings(query);\n    window.scrollBy(0, 500);\n  }\n\n  getResultTableBody() {\n    var rows = [];\n    const {\n      mentorInfos,\n      technology,\n      daterange\n    } = this.state;\n    alert(daterange.start);\n\n    for (const [index, value] of mentorInfos.entries()) {\n      var sNo = index + 1;\n      rows.push(React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        color: \"black\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, sNo)), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: {\n          pathname: '/profile',\n          state: {\n            technology: technology,\n            startdate: null,\n            enddate: null,\n            profileid: value.id\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, value.name)), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, value.experience), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, value.noOfTrainings), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, value.fee), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, value.technology)));\n    }\n\n    return React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, rows);\n  }\n\n  isInputValid() {\n    const {\n      technology,\n      daterange\n    } = this.state;\n    if (!technology || !technology.value) return false;\n    return true;\n  }\n\n  componentDidMount() {}\n\n  componentDidUpdate() {}\n\n  render() {\n    const {\n      technology,\n      technologyOptions\n    } = this.state;\n    return React.createElement(\"div\", {\n      class: \"search-trainings-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"Search Trainings\"), React.createElement(\"div\", {\n      class: \"technology-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(Select, {\n      placeholder: \"Select a technology\",\n      isSearchable: true,\n      isMulti: false,\n      autoFocus: false,\n      onChange: this.handleSelect('technology'),\n      options: technologyOptions,\n      value: technology,\n      name: \"technology\",\n      maxMenuHeight: 200,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      class: \"timeframe-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"label label-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"Select a timeframe\"), React.createElement(DateRangePicker, {\n      locale: \"en\",\n      numberOfCalendars: 2,\n      selectionType: \"range\",\n      minimumDate: new Date(),\n      value: this.state.daterange,\n      onSelect: this.onDateSelect,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      disabled: true,\n      type: \"text\",\n      class: \"form-control\",\n      placeholder: \"From date\",\n      value: this.state.daterange.start.format(\"DD-MM-YYYY\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      disabled: true,\n      type: \"text\",\n      class: \"form-control\",\n      placeholder: \"To date\",\n      style: {\n        marginLeft: '70px'\n      },\n      value: this.state.daterange.end.format(\"DD-MM-YYYY\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      class: \"search-button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      class: \"btn btn-info\",\n      style: {\n        padding: '10px 70px'\n      },\n      onClick: this.performSearch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"Search\")), React.createElement(\"div\", {\n      class: \"search-result\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"col\", {\n      width: \"50\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }), React.createElement(\"col\", {\n      width: \"200\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }), React.createElement(\"col\", {\n      width: \"200\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }), React.createElement(\"col\", {\n      width: \"200\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }), React.createElement(\"col\", {\n      width: \"200\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }), React.createElement(\"col\", {\n      width: \"200\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }), React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \"S.No\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \"Name\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \"Experience\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"No of Trainings delivered\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, \"Fee charged\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, \"Technology\"))), this.getResultTableBody())));\n  }\n\n}\n\nexport default SearchTrainings;","map":{"version":3,"sources":["C:/Leo/Work/FSD/CaseStudy/mentor-on-demand-ui/src/components/SearchTrainings/SearchTrainings.js"],"names":["React","Component","$","Tab","Tabs","TabList","TabPanel","Select","DateRangePicker","originalMoment","extendMoment","Link","SearchTrainings","constructor","props","handleSelect","name","value","setState","onDateSelect","daterange","states","bind","performSearch","getResultTableBody","moment","today","state","technologyOptions","technology","mentorInfos","range","clone","subtract","fetchTechnologies","url","fetch","then","res","json","result","map","item","option","label","id","push","fetchTrainings","query","method","headers","body","JSON","stringify","isInputValid","startdate","start","enddate","end","window","scrollBy","rows","alert","index","entries","sNo","pathname","profileid","experience","noOfTrainings","fee","componentDidMount","componentDidUpdate","render","Date","format","marginLeft","padding"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport $ from 'jquery';\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\r\nimport 'react-tabs/style/react-tabs.css';\r\nimport './searchTrainings.css';\r\nimport Select from 'react-select';\r\nimport DateRangePicker from 'react-daterange-picker';\r\nimport \"react-daterange-picker/dist/css/react-calendar.css\";\r\nimport originalMoment from \"moment\";\r\nimport { extendMoment } from \"moment-range\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nclass SearchTrainings extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleSelect = this.handleSelect.bind(this);\r\n    this.onDateSelect = this.onDateSelect.bind(this);\r\n    this.performSearch = this.performSearch.bind(this);\r\n    this.getResultTableBody = this.getResultTableBody.bind(this);\r\n\r\n    const moment = extendMoment(originalMoment);\r\n    const today = moment();\r\n\r\n    this.state = {\r\n      technologyOptions: [],\r\n      technology: null,\r\n      mentorInfos: [],\r\n      daterange: moment.range(today.clone().subtract(0, \"days\"), today.clone())\r\n    };\r\n\r\n    this.fetchTechnologies();\r\n  }\r\n\r\n  fetchTechnologies() {\r\n    const url = 'http://localhost:8080/mod/technology/all';\r\n    const {technologyOptions} = this.state;\r\n    fetch(url)\r\n    .then(res => res.json())\r\n    .then(\r\n      (result) => {\r\n          result.map(function(item) {\r\n            var option = {\r\n              label: item.name,\r\n              value: item.id\r\n            };\r\n            technologyOptions.push(option);\r\n          });\r\n      },\r\n    );\r\n  }\r\n\r\n  fetchTrainings(query) {\r\n    const url = 'http://localhost:8080/mod/trainsearch/mentor';\r\n    const {mentorInfos} = this.state;\r\n    fetch(url, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(query)\r\n    })\r\n    .then(res => res.json())\r\n    .then(\r\n      (result) => {\r\n          result.map(function(item) {\r\n            mentorInfos.push(item);\r\n          });\r\n          this.setState({mentorInfos: mentorInfos});\r\n      },\r\n    );\r\n  }\r\n\r\n  performSearch () {\r\n    const {technology, daterange} = this.state;\r\n    if(!this.isInputValid()) {\r\n      //alert(\"Technology field is empty. Please select Technology from dropdown..\");\r\n      return;\r\n    }\r\n    var query = {\r\n      technology: technology.value,\r\n      startdate: daterange.start,\r\n      enddate: daterange.end\r\n    };\r\n    this.state.mentorInfos = [];\r\n    this.fetchTrainings(query);\r\n    window.scrollBy(0, 500);\r\n  }\r\n\r\n  getResultTableBody() {\r\n    var rows = [];\r\n    const {mentorInfos, technology, daterange} = this.state;\r\n    alert(daterange.start);\r\n    for (const [index, value] of mentorInfos.entries()) {\r\n      var sNo = index + 1;\r\n      rows.push(\r\n        <tr>\r\n          <td><font color=\"black\">{sNo}</font></td>\r\n          <td>\r\n            <Link\r\n              to={{\r\n                pathname: '/profile',\r\n                state: {\r\n                  technology: technology,\r\n                  startdate: null,\r\n                  enddate: null,\r\n                  profileid: value.id\r\n                }\r\n              }}\r\n            >{value.name}</Link></td>\r\n\r\n          <td>{value.experience}</td>\r\n          <td>{value.noOfTrainings}</td>\r\n          <td>{value.fee}</td>\r\n          <td>{value.technology}</td>\r\n        </tr>\r\n      );\r\n    }\r\n    return (\r\n      <tbody>\r\n        {rows}\r\n      </tbody>\r\n    );\r\n  }\r\n\r\n  isInputValid() {\r\n    const {technology, daterange} = this.state;\r\n    if(!technology || !technology.value)\r\n      return false;\r\n    return true;\r\n  }\r\n\r\n  handleSelect = name => value => {\r\n\t\tthis.setState({[name]: value });\r\n\t}\r\n\r\n  onDateSelect = (daterange, states) => {\r\n    this.setState({ daterange, states });\r\n  };\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  componentDidUpdate() {\r\n  }\r\n\r\n  render() {\r\n    const {technology, technologyOptions} = this.state;\r\n\r\n    return (\r\n      <div class=\"search-trainings-container\">\r\n        <h5>Search Trainings</h5>\r\n        <div class=\"technology-container\">\r\n          <Select\r\n    \t\t\t\tplaceholder=\"Select a technology\"\r\n    \t\t\t\tisSearchable={true}\r\n    \t\t\t\tisMulti={false}\r\n    \t\t\t\tautoFocus={false}\r\n    \t\t\t\tonChange={this.handleSelect('technology')}\r\n    \t\t\t\toptions={technologyOptions}\r\n    \t\t\t\tvalue={technology}\r\n    \t\t\t\tname=\"technology\"\r\n    \t\t\t\tmaxMenuHeight={200}\r\n    \t\t\t/>\r\n        </div>\r\n        <div class=\"timeframe-container\">\r\n          <span class=\"label label-primary\">Select a timeframe</span>\r\n          <DateRangePicker\r\n            locale='en'\r\n            numberOfCalendars={2}\r\n            selectionType=\"range\"\r\n            minimumDate={new Date()}\r\n            value={this.state.daterange}\r\n            onSelect={this.onDateSelect}\r\n          />\r\n          <div class=\"row\">\r\n            <input disabled type=\"text\" class=\"form-control\"\r\n              placeholder=\"From date\"\r\n              value={this.state.daterange.start.format(\"DD-MM-YYYY\")}/>\r\n            <input disabled type=\"text\" class=\"form-control\"\r\n              placeholder=\"To date\" style={{marginLeft: '70px'}}\r\n              value={this.state.daterange.end.format(\"DD-MM-YYYY\")}/>\r\n          </div>\r\n        </div>\r\n        <div class=\"search-button\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-info\"\r\n            style={{padding: '10px 70px'}}\r\n            onClick={this.performSearch}\r\n          >Search</button>\r\n        </div>\r\n        <div class=\"search-result\">\r\n          <table>\r\n            <col width=\"50\"/>\r\n            <col width=\"200\"/>\r\n            <col width=\"200\"/>\r\n            <col width=\"200\"/>\r\n            <col width=\"200\"/>\r\n            <col width=\"200\"/>\r\n            <thead>\r\n              <tr>\r\n                <th>S.No</th>\r\n                <th>Name</th>\r\n                <th>Experience</th>\r\n                <th>No of Trainings delivered</th>\r\n                <th>Fee charged</th>\r\n                <th>Technology</th>\r\n              </tr>\r\n            </thead>\r\n            {this.getResultTableBody()}\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchTrainings;\r\n"]},"metadata":{},"sourceType":"module"}