{"ast":null,"code":"var _jsxFileName = \"C:\\\\Leo\\\\Work\\\\FSD\\\\CaseStudy\\\\mentor-on-demand-ui\\\\src\\\\components\\\\SearchTrainings\\\\SearchTrainings.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport { connect } from 'react-redux';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport 'react-tabs/style/react-tabs.css';\nimport './searchTrainings.css';\nimport Select from 'react-select';\nimport DateRangePicker from 'react-daterange-picker';\nimport \"react-daterange-picker/dist/css/react-calendar.css\";\nimport originalMoment from \"moment\";\nimport { extendMoment } from \"moment-range\";\nimport { Link } from \"react-router-dom\";\nimport { Constant } from '../../constants/AppConstants.js';\n\nfunction mapStateToProps(state, props) {\n  return {\n    userId: state.userId\n  };\n}\n\nclass SearchTrainings extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSelect = name => value => {\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.onDateSelect = (daterange, states) => {\n      this.setState({\n        daterange,\n        states\n      });\n    };\n\n    this.handleSelect = this.handleSelect.bind(this);\n    this.onDateSelect = this.onDateSelect.bind(this);\n    this.performSearch = this.performSearch.bind(this);\n    this.proposeTraining = this.proposeTraining.bind(this);\n    const moment = extendMoment(originalMoment);\n    const today = moment();\n    this.state = {\n      technologyOptions: [],\n      technology: null,\n      mentorInfos: [],\n      trainingData: {},\n      disablePropose: false,\n      daterange: moment.range(today.clone().add(1, \"days\"), today.clone().add(1, \"days\"))\n    };\n\n    if (!this.props.userId) {\n      this.state.disablePropose = true;\n    }\n\n    this.fetchTechnologies();\n  }\n\n  fetchTechnologies() {\n    const url = Constant.BASE_URL + '/technology/all';\n    const {\n      technologyOptions\n    } = this.state;\n    fetch(url, {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(result => {\n      result.map(function (item) {\n        var option = {\n          label: item.name,\n          value: item.id\n        };\n        technologyOptions.push(option);\n      });\n    });\n  }\n\n  fetchTrainings(query) {\n    const url = Constant.BASE_URL + '/trainsearch/mentor';\n    const {\n      mentorInfos\n    } = this.state;\n    fetch(url, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(query)\n    }).then(res => res.json()).then(result => {\n      result.map(function (item) {\n        mentorInfos.push(item);\n      });\n      this.setState({\n        mentorInfos: mentorInfos\n      });\n    });\n  }\n\n  performSearch() {\n    const {\n      technology,\n      daterange\n    } = this.state;\n\n    if (!this.validateInputs()) {\n      //alert(\"Technology field is empty. Please select Technology from dropdown..\");\n      return;\n    }\n\n    var query = {\n      technology: technology.value,\n      startdate: daterange.start,\n      enddate: daterange.end,\n      scholar: this.props.userId\n    };\n    this.state.mentorInfos = [];\n    this.fetchTrainings(query);\n    window.scrollBy(0, 700);\n  }\n\n  getProposeElement(proposed, id) {\n    const {\n      mentorInfos,\n      disablePropose\n    } = this.state;\n\n    if (proposed) {\n      return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"Proposed\");\n    } else {\n      return React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-warning\",\n        disabled: disablePropose,\n        id: id,\n        onClick: e => this.proposeTraining(e, id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Propose\");\n    }\n  }\n\n  proposeTraining(e, id) {\n    const {\n      mentorInfos,\n      technology,\n      daterange,\n      trainingData\n    } = this.state;\n    var startdate = daterange.start.toDate();\n    var enddate = daterange.end.toDate();\n\n    for (const [index, value] of mentorInfos.entries()) {\n      if (value.id == id) {\n        trainingData.scholarId = this.props.userId;\n        trainingData.mentorId = value.mentor;\n        trainingData.technologyId = technology;\n        trainingData.startdate = startdate;\n        trainingData.enddate = enddate;\n        this.postTrainingRequest();\n      }\n    }\n  }\n\n  postTrainingRequest() {\n    const {\n      trainingData\n    } = this.state;\n    alert(JSON.stringify(trainingData));\n    const url = Constant.BASE_URL + '/trainsearch/mentor';\n    const {\n      mentorInfos\n    } = this.state;\n    fetch(url, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(query)\n    }).then(res => res.json()).then(result => {\n      result.map(function (item) {\n        mentorInfos.push(item);\n      });\n      this.setState({\n        mentorInfos: mentorInfos\n      });\n    }); //proposed[index] = true;\n    //this.setState({proposed: proposed});\n  }\n\n  getResultTableBody() {\n    var rows = [];\n    const {\n      mentorInfos,\n      technology,\n      daterange\n    } = this.state;\n    var startdate = daterange.start.toDate();\n    var enddate = daterange.end.toDate();\n\n    for (const [index, value] of mentorInfos.entries()) {\n      var sNo = index + 1;\n      rows.push(React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, sNo), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: {\n          pathname: '/profile',\n          state: {\n            technology: technology,\n            startdate: startdate,\n            enddate: enddate,\n            userid: value.id,\n            mentorInfo: null\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, value.name)), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, value.experience), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, value.noOfTrainings), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, value.fee), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, value.technology), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, this.getProposeElement(value.proposed, value.id))));\n    }\n\n    return React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, rows);\n  }\n\n  validateInputs() {\n    const {\n      technology,\n      daterange\n    } = this.state;\n    if (!technology || !technology.value) return false;\n    return true;\n  }\n\n  componentDidMount() {}\n\n  componentDidUpdate() {}\n\n  render() {\n    const {\n      technology,\n      technologyOptions\n    } = this.state;\n    return React.createElement(\"div\", {\n      class: \"search-trainings-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, \"Search Trainings\"), React.createElement(\"div\", {\n      class: \"technology-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, React.createElement(Select, {\n      placeholder: \"Select a technology\",\n      isSearchable: true,\n      isMulti: false,\n      autoFocus: false,\n      onChange: this.handleSelect('technology'),\n      options: technologyOptions,\n      value: technology,\n      name: \"technology\",\n      maxMenuHeight: 200,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      class: \"timeframe-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"label label-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, \"Select Dates\"), React.createElement(DateRangePicker, {\n      locale: \"en\",\n      numberOfCalendars: 2,\n      selectionType: \"range\",\n      minimumDate: new Date(),\n      value: this.state.daterange,\n      onSelect: this.onDateSelect,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      disabled: true,\n      type: \"text\",\n      class: \"form-control\",\n      placeholder: \"From date\",\n      value: this.state.daterange.start.format(\"DD-MM-YYYY\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      disabled: true,\n      type: \"text\",\n      class: \"form-control\",\n      placeholder: \"To date\",\n      style: {\n        marginLeft: '70px'\n      },\n      value: this.state.daterange.end.format(\"DD-MM-YYYY\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      class: \"search-button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      class: \"btn btn-info\",\n      style: {\n        padding: '10px 70px'\n      },\n      onClick: this.performSearch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, \"Search\")), React.createElement(\"div\", {\n      class: \"search-result\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, React.createElement(\"col\", {\n      width: \"50\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }), React.createElement(\"col\", {\n      width: \"200\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }), React.createElement(\"col\", {\n      width: \"120\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }), React.createElement(\"col\", {\n      width: \"120\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }), React.createElement(\"col\", {\n      width: \"120\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    }), React.createElement(\"col\", {\n      width: \"200\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }), React.createElement(\"col\", {\n      width: \"100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }), React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, \"S.No\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }, \"Name\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, \"Experience\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }, \"No of Trainings delivered\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }, \"Fee charged\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293\n      },\n      __self: this\n    }, \"Technology\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, \"Action\"))), this.getResultTableBody())));\n  }\n\n}\n\nexport default connect(mapStateToProps)(SearchTrainings);","map":{"version":3,"sources":["C:/Leo/Work/FSD/CaseStudy/mentor-on-demand-ui/src/components/SearchTrainings/SearchTrainings.js"],"names":["React","Component","$","connect","Tab","Tabs","TabList","TabPanel","Select","DateRangePicker","originalMoment","extendMoment","Link","Constant","mapStateToProps","state","props","userId","SearchTrainings","constructor","handleSelect","name","value","setState","onDateSelect","daterange","states","bind","performSearch","proposeTraining","moment","today","technologyOptions","technology","mentorInfos","trainingData","disablePropose","range","clone","add","fetchTechnologies","url","BASE_URL","fetch","method","headers","then","res","json","result","map","item","option","label","id","push","fetchTrainings","query","body","JSON","stringify","validateInputs","startdate","start","enddate","end","scholar","window","scrollBy","getProposeElement","proposed","e","toDate","index","entries","scholarId","mentorId","mentor","technologyId","postTrainingRequest","alert","getResultTableBody","rows","sNo","pathname","userid","mentorInfo","experience","noOfTrainings","fee","componentDidMount","componentDidUpdate","render","Date","format","marginLeft","padding"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport $ from 'jquery';\r\nimport {connect} from 'react-redux';\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\r\nimport 'react-tabs/style/react-tabs.css';\r\nimport './searchTrainings.css';\r\nimport Select from 'react-select';\r\nimport DateRangePicker from 'react-daterange-picker';\r\nimport \"react-daterange-picker/dist/css/react-calendar.css\";\r\nimport originalMoment from \"moment\";\r\nimport { extendMoment } from \"moment-range\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {Constant} from '../../constants/AppConstants.js';\r\n\r\nfunction mapStateToProps(state, props) {\r\n    return {\r\n      userId: state.userId\r\n    };\r\n}\r\n\r\nclass SearchTrainings extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleSelect = this.handleSelect.bind(this);\r\n    this.onDateSelect = this.onDateSelect.bind(this);\r\n    this.performSearch = this.performSearch.bind(this);\r\n    this.proposeTraining = this.proposeTraining.bind(this);\r\n\r\n    const moment = extendMoment(originalMoment);\r\n    const today = moment();\r\n\r\n    this.state = {\r\n      technologyOptions: [],\r\n      technology: null,\r\n      mentorInfos: [],\r\n      trainingData: {},\r\n      disablePropose: false,\r\n      daterange: moment.range(today.clone().add(1, \"days\"), today.clone().add(1, \"days\"))\r\n    };\r\n\r\n    if(!this.props.userId) {\r\n      this.state.disablePropose = true;\r\n    }\r\n\r\n    this.fetchTechnologies();\r\n  }\r\n\r\n  fetchTechnologies() {\r\n    const url = Constant.BASE_URL + '/technology/all';\r\n    const {technologyOptions} = this.state;\r\n    fetch(url, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n      }})\r\n    .then(res => res.json())\r\n    .then(\r\n      (result) => {\r\n        result.map(function(item) {\r\n          var option = {\r\n            label: item.name,\r\n            value: item.id\r\n          };\r\n          technologyOptions.push(option);\r\n        });\r\n      }\r\n    );\r\n  }\r\n\r\n  fetchTrainings(query) {\r\n    const url = Constant.BASE_URL + '/trainsearch/mentor';\r\n    const {mentorInfos} = this.state;\r\n    fetch(url, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(query)\r\n    })\r\n    .then(res => res.json())\r\n    .then(\r\n      (result) => {\r\n        result.map(function(item) {\r\n          mentorInfos.push(item);\r\n        });\r\n        this.setState({mentorInfos: mentorInfos});\r\n      }\r\n    );\r\n  }\r\n\r\n  performSearch () {\r\n    const {technology, daterange} = this.state;\r\n    if(!this.validateInputs()) {\r\n      //alert(\"Technology field is empty. Please select Technology from dropdown..\");\r\n      return;\r\n    }\r\n\r\n    var query = {\r\n      technology: technology.value,\r\n      startdate: daterange.start,\r\n      enddate: daterange.end,\r\n      scholar: this.props.userId\r\n    };\r\n    this.state.mentorInfos = [];\r\n    this.fetchTrainings(query);\r\n    window.scrollBy(0, 700);\r\n  }\r\n\r\n  getProposeElement(proposed, id) {\r\n    const {mentorInfos, disablePropose} = this.state;\r\n    if(proposed) {\r\n      return (<p>Proposed</p>);\r\n    } else {\r\n      return (\r\n        <button\r\n          type=\"button\"\r\n          class=\"btn btn-warning\"\r\n          disabled={disablePropose}\r\n          id={id}\r\n          onClick={(e) => this.proposeTraining(e, id)}>Propose</button>\r\n      );\r\n    }\r\n  }\r\n\r\n  proposeTraining(e, id) {\r\n    const {mentorInfos, technology, daterange, trainingData} = this.state;\r\n    var startdate = daterange.start.toDate();\r\n    var enddate = daterange.end.toDate();\r\n    for(const [index, value] of mentorInfos.entries()) {\r\n      if(value.id == id) {\r\n        trainingData.scholarId = this.props.userId;\r\n        trainingData.mentorId = value.mentor;\r\n        trainingData.technologyId = technology;\r\n        trainingData.startdate = startdate;\r\n        trainingData.enddate = enddate;\r\n        this.postTrainingRequest();\r\n      }\r\n    }\r\n  }\r\n\r\n  postTrainingRequest() {\r\n    const {trainingData} = this.state;\r\n    alert(JSON.stringify(trainingData));\r\n    const url = Constant.BASE_URL + '/trainsearch/mentor';\r\n    const {mentorInfos} = this.state;\r\n    fetch(url, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(query)\r\n    })\r\n    .then(res => res.json())\r\n    .then(\r\n      (result) => {\r\n        result.map(function(item) {\r\n          mentorInfos.push(item);\r\n        });\r\n        this.setState({mentorInfos: mentorInfos});\r\n      }\r\n    );\r\n    //proposed[index] = true;\r\n    //this.setState({proposed: proposed});\r\n  }\r\n\r\n  getResultTableBody() {\r\n    var rows = [];\r\n    const {mentorInfos, technology, daterange} = this.state;\r\n    var startdate = daterange.start.toDate();\r\n    var enddate = daterange.end.toDate();\r\n\r\n    for (const [index, value] of mentorInfos.entries()) {\r\n      var sNo = index + 1;\r\n      rows.push(\r\n        <tr>\r\n          <td>{sNo}</td>\r\n          <td>\r\n            <Link\r\n              to={{\r\n                pathname: '/profile',\r\n                state: {\r\n                  technology: technology,\r\n                  startdate: startdate,\r\n                  enddate: enddate,\r\n                  userid: value.id,\r\n                  mentorInfo: null\r\n                }\r\n              }}\r\n            >{value.name}</Link>\r\n          </td>\r\n          <td>{value.experience}</td>\r\n          <td>{value.noOfTrainings}</td>\r\n          <td>{value.fee}</td>\r\n          <td>{value.technology}</td>\r\n          <td>{this.getProposeElement(value.proposed, value.id)}</td>\r\n        </tr>\r\n      );\r\n    }\r\n    return (\r\n      <tbody>\r\n        {rows}\r\n      </tbody>\r\n    );\r\n  }\r\n\r\n  validateInputs() {\r\n    const {technology, daterange} = this.state;\r\n    if(!technology || !technology.value)\r\n      return false;\r\n    return true;\r\n  }\r\n\r\n  handleSelect = name => value => {\r\n\t\tthis.setState({[name]: value });\r\n\t}\r\n\r\n  onDateSelect = (daterange, states) => {\r\n    this.setState({ daterange, states });\r\n  };\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  componentDidUpdate() {\r\n  }\r\n\r\n  render() {\r\n    const {technology, technologyOptions} = this.state;\r\n\r\n    return (\r\n      <div class=\"search-trainings-container\">\r\n        <h5>Search Trainings</h5>\r\n        <div class=\"technology-container\">\r\n          <Select\r\n    \t\t\t\tplaceholder=\"Select a technology\"\r\n    \t\t\t\tisSearchable={true}\r\n    \t\t\t\tisMulti={false}\r\n    \t\t\t\tautoFocus={false}\r\n    \t\t\t\tonChange={this.handleSelect('technology')}\r\n    \t\t\t\toptions={technologyOptions}\r\n    \t\t\t\tvalue={technology}\r\n    \t\t\t\tname=\"technology\"\r\n    \t\t\t\tmaxMenuHeight={200}\r\n    \t\t\t/>\r\n        </div>\r\n        <div class=\"timeframe-container\">\r\n          <span class=\"label label-primary\">Select Dates</span>\r\n          <DateRangePicker\r\n            locale='en'\r\n            numberOfCalendars={2}\r\n            selectionType=\"range\"\r\n            minimumDate={new Date()}\r\n            value={this.state.daterange}\r\n            onSelect={this.onDateSelect}\r\n          />\r\n          <div class=\"row\">\r\n            <input disabled type=\"text\" class=\"form-control\"\r\n              placeholder=\"From date\"\r\n              value={this.state.daterange.start.format(\"DD-MM-YYYY\")}/>\r\n            <input disabled type=\"text\" class=\"form-control\"\r\n              placeholder=\"To date\" style={{marginLeft: '70px'}}\r\n              value={this.state.daterange.end.format(\"DD-MM-YYYY\")}/>\r\n          </div>\r\n        </div>\r\n        <div class=\"search-button\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-info\"\r\n            style={{padding: '10px 70px'}}\r\n            onClick={this.performSearch}\r\n          >Search</button>\r\n        </div>\r\n        <div class=\"search-result\">\r\n          <table>\r\n            <col width=\"50\"/>\r\n            <col width=\"200\"/>\r\n            <col width=\"120\"/>\r\n            <col width=\"120\"/>\r\n            <col width=\"120\"/>\r\n            <col width=\"200\"/>\r\n            <col width=\"100\"/>\r\n            <thead>\r\n              <tr>\r\n                <th>S.No</th>\r\n                <th>Name</th>\r\n                <th>Experience</th>\r\n                <th>No of Trainings delivered</th>\r\n                <th>Fee charged</th>\r\n                <th>Technology</th>\r\n                <th>Action</th>\r\n              </tr>\r\n            </thead>\r\n            {this.getResultTableBody()}\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(SearchTrainings);\r\n"]},"metadata":{},"sourceType":"module"}