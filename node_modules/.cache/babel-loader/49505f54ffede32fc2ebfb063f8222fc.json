{"ast":null,"code":"var _jsxFileName = \"C:\\\\Leo\\\\Work\\\\FSD\\\\CaseStudy\\\\mentor-on-demand-ui\\\\src\\\\components\\\\SearchTrainings\\\\SearchTrainings.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport 'react-tabs/style/react-tabs.css';\nimport './searchTrainings.css';\nimport Select from 'react-select';\nimport DateRangePicker from 'react-daterange-picker';\nimport \"react-daterange-picker/dist/css/react-calendar.css\";\nimport originalMoment from \"moment\";\nimport { extendMoment } from \"moment-range\";\nconst moment = extendMoment(originalMoment);\n\nclass SearchTrainings extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSelect = name => value => {\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.onDateSelect = (daterange, states) => {\n      this.setState({\n        daterange,\n        states\n      });\n    };\n\n    this.handleSelect = this.handleSelect.bind(this);\n    this.onDateSelect = this.onDateSelect.bind(this);\n    this.performSearch = this.performSearch.bind(this);\n    this.getResultTableBody = this.getResultTableBody.bind(this);\n    const today = moment();\n    this.state = {\n      technologyOptions: [],\n      technology: null,\n      mentorInfos: [],\n      daterange: moment.range(today.clone().subtract(0, \"days\"), today.clone())\n    };\n    this.fetchTechnologies();\n  }\n\n  fetchTechnologies() {\n    const url = 'http://localhost:8080/mod/technology/all';\n    const {\n      technologyOptions\n    } = this.state;\n    fetch(url).then(res => res.json()).then(result => {\n      result.map(function (item) {\n        var option = {\n          label: item.name,\n          value: item.id\n        };\n        technologyOptions.push(option);\n      });\n    });\n  }\n\n  fetchTrainings(query) {\n    const url = 'http://localhost:8080/mod/trainsearch/mentor';\n    const {\n      mentorInfos\n    } = this.state;\n    fetch(url, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(query)\n    }).then(res => res.json()).then(result => {\n      result.map(function (item) {\n        mentorInfos.push(item);\n      });\n      this.setState({\n        mentorInfos: mentorInfos\n      });\n    });\n  }\n\n  performSearch() {\n    const {\n      technology,\n      daterange\n    } = this.state;\n    var query = {\n      technology: technology.value,\n      startdate: daterange.start,\n      enddate: daterange.end\n    };\n    this.fetchTrainings(query);\n  }\n\n  getResultTableBody() {\n    var rows = [];\n    const {\n      mentorInfos\n    } = this.state;\n\n    for (const [index, value] of mentorInfos.entries()) {\n      var sNo = index + 1;\n      rows.push(React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        color: \"black\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, sNo)), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, value.name), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, value.experience), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, value.noOfTrainings), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, value.fee), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, value.technology)));\n    }\n\n    return React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, rows);\n  }\n\n  isInputValid() {\n    const {\n      technology,\n      daterange\n    } = this.state;\n    if (!technology) return false;\n    return !(title.trim() == \"\");\n  }\n\n  componentDidMount() {}\n\n  componentDidUpdate() {}\n\n  render() {\n    const {\n      technology,\n      technologyOptions\n    } = this.state;\n    return React.createElement(\"div\", {\n      class: \"search-trainings-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"Search Trainings\"), React.createElement(\"div\", {\n      class: \"technology-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(Select, {\n      placeholder: \"Select a technology\",\n      isSearchable: true,\n      isMulti: false,\n      autoFocus: false,\n      onChange: this.handleSelect('technology'),\n      options: technologyOptions,\n      value: technology,\n      name: \"technology\",\n      maxMenuHeight: 200,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      class: \"timeframe-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"label label-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"Select a timeframe\"), React.createElement(DateRangePicker, {\n      locale: \"en\",\n      numberOfCalendars: 2,\n      selectionType: \"range\",\n      minimumDate: new Date(),\n      value: this.state.daterange,\n      onSelect: this.onDateSelect,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      disabled: true,\n      type: \"text\",\n      class: \"form-control\",\n      placeholder: \"From date\",\n      value: this.state.daterange.start.format(\"DD-MM-YYYY\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      disabled: true,\n      type: \"text\",\n      class: \"form-control\",\n      placeholder: \"To date\",\n      style: {\n        marginLeft: '70px'\n      },\n      value: this.state.daterange.end.format(\"DD-MM-YYYY\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      class: \"search-button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      class: \"btn btn-info\",\n      style: {\n        padding: '10px 70px'\n      },\n      onClick: this.performSearch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, \"Search\")), React.createElement(\"div\", {\n      class: \"search-result\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"col\", {\n      width: \"50\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }), React.createElement(\"col\", {\n      width: \"200\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }), React.createElement(\"col\", {\n      width: \"200\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }), React.createElement(\"col\", {\n      width: \"200\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }), React.createElement(\"col\", {\n      width: \"200\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }), React.createElement(\"col\", {\n      width: \"200\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }), React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, \"S.No\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"Name\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \"Experience\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"No of Trainings delivered\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \"Fee charged\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, \"Technology\"))), this.getResultTableBody())));\n  }\n\n}\n\nexport default SearchTrainings;","map":{"version":3,"sources":["C:/Leo/Work/FSD/CaseStudy/mentor-on-demand-ui/src/components/SearchTrainings/SearchTrainings.js"],"names":["React","Component","$","Tab","Tabs","TabList","TabPanel","Select","DateRangePicker","originalMoment","extendMoment","moment","SearchTrainings","constructor","props","handleSelect","name","value","setState","onDateSelect","daterange","states","bind","performSearch","getResultTableBody","today","state","technologyOptions","technology","mentorInfos","range","clone","subtract","fetchTechnologies","url","fetch","then","res","json","result","map","item","option","label","id","push","fetchTrainings","query","method","headers","body","JSON","stringify","startdate","start","enddate","end","rows","index","entries","sNo","experience","noOfTrainings","fee","isInputValid","title","trim","componentDidMount","componentDidUpdate","render","Date","format","marginLeft","padding"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport $ from 'jquery';\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\r\nimport 'react-tabs/style/react-tabs.css';\r\nimport './searchTrainings.css';\r\nimport Select from 'react-select';\r\nimport DateRangePicker from 'react-daterange-picker';\r\nimport \"react-daterange-picker/dist/css/react-calendar.css\";\r\nimport originalMoment from \"moment\";\r\nimport { extendMoment } from \"moment-range\";\r\nconst moment = extendMoment(originalMoment);\r\n\r\nclass SearchTrainings extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleSelect = this.handleSelect.bind(this);\r\n    this.onDateSelect = this.onDateSelect.bind(this);\r\n    this.performSearch = this.performSearch.bind(this);\r\n    this.getResultTableBody = this.getResultTableBody.bind(this);\r\n\r\n    const today = moment();\r\n\r\n    this.state = {\r\n      technologyOptions: [],\r\n      technology: null,\r\n      mentorInfos: [],\r\n      daterange: moment.range(today.clone().subtract(0, \"days\"), today.clone())\r\n    };\r\n\r\n    this.fetchTechnologies();\r\n  }\r\n\r\n  fetchTechnologies() {\r\n    const url = 'http://localhost:8080/mod/technology/all';\r\n    const {technologyOptions} = this.state;\r\n    fetch(url)\r\n    .then(res => res.json())\r\n    .then(\r\n      (result) => {\r\n          result.map(function(item) {\r\n            var option = {\r\n              label: item.name,\r\n              value: item.id\r\n            };\r\n            technologyOptions.push(option);\r\n          });\r\n      },\r\n    );\r\n  }\r\n\r\n  fetchTrainings(query) {\r\n    const url = 'http://localhost:8080/mod/trainsearch/mentor';\r\n    const {mentorInfos} = this.state;\r\n    fetch(url, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(query)\r\n    })\r\n    .then(res => res.json())\r\n    .then(\r\n      (result) => {\r\n          result.map(function(item) {\r\n            mentorInfos.push(item);\r\n          });\r\n          this.setState({mentorInfos: mentorInfos});\r\n      },\r\n    );\r\n  }\r\n\r\n  performSearch () {\r\n    const {technology, daterange} = this.state;\r\n    var query = {\r\n      technology: technology.value,\r\n      startdate: daterange.start,\r\n      enddate: daterange.end\r\n    };\r\n    this.fetchTrainings(query);\r\n  }\r\n\r\n  getResultTableBody() {\r\n    var rows = [];\r\n    const {mentorInfos} = this.state;\r\n    for (const [index, value] of mentorInfos.entries()) {\r\n      var sNo = index + 1;\r\n      rows.push(\r\n        <tr>\r\n          <td><font color=\"black\">{sNo}</font></td>\r\n          <td>{value.name}</td>\r\n          <td>{value.experience}</td>\r\n          <td>{value.noOfTrainings}</td>\r\n          <td>{value.fee}</td>\r\n          <td>{value.technology}</td>\r\n        </tr>\r\n      );\r\n    }\r\n    return (\r\n      <tbody>\r\n        {rows}\r\n      </tbody>\r\n    );\r\n  }\r\n\r\n  isInputValid() {\r\n    const {technology, daterange} = this.state;\r\n    if(!(technology))\r\n      return false;\r\n    return !(title.trim() == \"\");\r\n  }\r\n\r\n  handleSelect = name => value => {\r\n\t\tthis.setState({[name]: value });\r\n\t}\r\n\r\n  onDateSelect = (daterange, states) => {\r\n    this.setState({ daterange, states });\r\n  };\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  componentDidUpdate() {\r\n  }\r\n\r\n  render() {\r\n    const {technology, technologyOptions} = this.state;\r\n\r\n    return (\r\n      <div class=\"search-trainings-container\">\r\n        <h5>Search Trainings</h5>\r\n        <div class=\"technology-container\">\r\n          <Select\r\n    \t\t\t\tplaceholder=\"Select a technology\"\r\n    \t\t\t\tisSearchable={true}\r\n    \t\t\t\tisMulti={false}\r\n    \t\t\t\tautoFocus={false}\r\n    \t\t\t\tonChange={this.handleSelect('technology')}\r\n    \t\t\t\toptions={technologyOptions}\r\n    \t\t\t\tvalue={technology}\r\n    \t\t\t\tname=\"technology\"\r\n    \t\t\t\tmaxMenuHeight={200}\r\n    \t\t\t/>\r\n        </div>\r\n        <div class=\"timeframe-container\">\r\n          <span class=\"label label-primary\">Select a timeframe</span>\r\n          <DateRangePicker\r\n            locale='en'\r\n            numberOfCalendars={2}\r\n            selectionType=\"range\"\r\n            minimumDate={new Date()}\r\n            value={this.state.daterange}\r\n            onSelect={this.onDateSelect}\r\n          />\r\n          <div class=\"row\">\r\n            <input disabled type=\"text\" class=\"form-control\"\r\n              placeholder=\"From date\"\r\n              value={this.state.daterange.start.format(\"DD-MM-YYYY\")}/>\r\n            <input disabled type=\"text\" class=\"form-control\"\r\n              placeholder=\"To date\" style={{marginLeft: '70px'}}\r\n              value={this.state.daterange.end.format(\"DD-MM-YYYY\")}/>\r\n          </div>\r\n        </div>\r\n        <div class=\"search-button\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-info\"\r\n            style={{padding: '10px 70px'}}\r\n            onClick={this.performSearch}\r\n          >Search</button>\r\n        </div>\r\n        <div class=\"search-result\">\r\n          <table>\r\n            <col width=\"50\"/>\r\n            <col width=\"200\"/>\r\n            <col width=\"200\"/>\r\n            <col width=\"200\"/>\r\n            <col width=\"200\"/>\r\n            <col width=\"200\"/>\r\n            <thead>\r\n              <tr>\r\n                <th>S.No</th>\r\n                <th>Name</th>\r\n                <th>Experience</th>\r\n                <th>No of Trainings delivered</th>\r\n                <th>Fee charged</th>\r\n                <th>Technology</th>\r\n              </tr>\r\n            </thead>\r\n            {this.getResultTableBody()}\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchTrainings;\r\n"]},"metadata":{},"sourceType":"module"}